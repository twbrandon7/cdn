<?xml version="1.0" encoding="UTF-8"?>
<Module>

<ModulePrefs title="Include gadget (iframe)"
title_url="http://sites.google.com/site/gadgetsbysj/gadgets/iframe"
description="Include another web page in your Google Site"
thumbnail="http://sites.google.com/site/gadgetsbysj/gadgets/iframe/iframe-thumbnail.png"
height="800"
width="600"
author="Scott Johnston"
author_email="scott.m.johnston@gmail.com">
  <Require feature="dynamic-height"/>
</ModulePrefs>
<UserPref name="iframeURL" display_name="URL to content" required="true" />
<UserPref name="scroll" display_name="Display scrollbar" default_value="auto" datatype="enum">
  <EnumValue value="auto" display_value="Automatic"/>
  <EnumValue value="no" display_value="No"/>
  <EnumValue value="yes" display_value="Yes"/>
</UserPref>

<Content type="html" view="default,canvas"><![CDATA[
    <div id='dest'><img src="https://ssl.gstatic.com/s2/oz/images/notifications/spinner_32_794cfa28f324131c58c8934183d55d25.gif"></div>
<script type="text/javascript">
  
  gadgets.util.registerOnLoadHandler(doRender);
  
  function doRender(){
    // setup variables
    var prefs = new _IG_Prefs();
    var iframeURL = prefs.getString('iframeURL');
    var scroll = prefs.getString('scroll');
    var height = 800;
    var width = 600;
    if(gadgets.window){
      var viewport = gadgets.window.getViewportDimensions();
      if(viewport.width){
        var width = viewport.width;
      }
      if(viewport.height){
        var height = viewport.height;
      }
    } 
    var iframe = document.createElement('iframe');
    iframe.setAttribute('width',width+'px');
    iframe.setAttribute('height',height+'px');
    // TODO: add options to control frameborder
    iframe.setAttribute('frameborder','no');
    if(scroll){
      iframe.setAttribute('scrolling',scroll);
    }
    iframe.setAttribute('src',iframeURL);
    // set the slideshow to the placeholder div
    var dest = document.getElementById('dest');
    dest.innerHTML = '';
    dest.appendChild(iframe);    
  }
</script>


]]></Content>
</Module>

